<script>
  function run() {
    const topic = document.getElementById("topic").value;
    const status = document.getElementById("status");

    if (!topic) {
      alert("주제를 입력하세요");
      return;
    }

    status.innerText = "⏳ n8n 자동화 실행 중…";

    fetch("https://zzzacai77.app.n8n.cloud/webhook/164dec69-3078-4600-b3a6-393bca0a8910", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ topic })
    })
    .then(async (res) => {
      const text = await res.text();   // json 아닐 수도 있어서 안전하게
      status.innerText = "✅ 응답: " + text;
    })
    .catch((err) => {
      status.innerText = "❌ 실패: " + err.message;
    });
  }
</script>
